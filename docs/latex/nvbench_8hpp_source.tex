\doxysection{nvbench.\+hpp}
\hypertarget{nvbench_8hpp_source}{}\label{nvbench_8hpp_source}\index{include/comppare/plugin/nvbench/nvbench.hpp@{include/comppare/plugin/nvbench/nvbench.hpp}}
\mbox{\hyperlink{nvbench_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{}}
\DoxyCodeLine{00003\ \textcolor{comment}{Copyright\ 2025\ |\ Leong\ Fan\ FUNG\ |\ funglf\ |\ stanleyfunglf@gmail.com}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy\ }}
\DoxyCodeLine{00006\ \textcolor{comment}{of\ this\ software\ and\ associated\ documentation\ files\ (the\ “Software”),\ to\ deal\ }}
\DoxyCodeLine{00007\ \textcolor{comment}{in\ the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights\ }}
\DoxyCodeLine{00008\ \textcolor{comment}{to\ use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell\ }}
\DoxyCodeLine{00009\ \textcolor{comment}{copies\ of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is\ }}
\DoxyCodeLine{00010\ \textcolor{comment}{furnished\ to\ do\ so,\ subject\ to\ the\ following\ conditions:}}
\DoxyCodeLine{00011\ \textcolor{comment}{}}
\DoxyCodeLine{00012\ \textcolor{comment}{The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be\ included\ in\ }}
\DoxyCodeLine{00013\ \textcolor{comment}{all\ copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{00014\ \textcolor{comment}{}}
\DoxyCodeLine{00015\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ “AS\ IS”,\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR\ }}
\DoxyCodeLine{00016\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,\ }}
\DoxyCodeLine{00017\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE\ }}
\DoxyCodeLine{00018\ \textcolor{comment}{AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER\ }}
\DoxyCodeLine{00019\ \textcolor{comment}{LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,\ }}
\DoxyCodeLine{00020\ \textcolor{comment}{OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE\ }}
\DoxyCodeLine{00021\ \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{00022\ \textcolor{comment}{}}
\DoxyCodeLine{00023\ \textcolor{comment}{*/}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#ifdef\ HAVE\_NV\_BENCH}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <nvbench/nvbench.cuh>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{plugin_8hpp}{comppare/plugin/plugin.hpp}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecomppare_1_1plugin_1_1nvbenchplugin}{comppare::plugin::nvbenchplugin}}}
\DoxyCodeLine{00035\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ F>}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}}
\DoxyCodeLine{00038\ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ F\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_af36a57024637dadc6fb3e43bd5d5e4df}{f}};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a53a4d067d4cbe96a7b74cdfd33671931}{operator()}}(nvbench::state\ \&st,\ nvbench::type\_list<>)}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_af36a57024637dadc6fb3e43bd5d5e4df}{f}}(st);}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}(F\ \_f)\ :\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_af36a57024637dadc6fb3e43bd5d5e4df}{f}}(std::move(\_f))\ \{\}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_adb8de4682ec1dc9ee3b634d20575b34c}{\string~NvbenchCallable}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_ad7cc236aae265eef8c489ed33901064b}{NvbenchCallable}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&\mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a36a7d9d917c7fdd24e24a7686a204c7d}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_af939b803628dba8dc3c6c5bba217422e}{NvbenchCallable}}(\mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&\&other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&\mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_aef83492710ab514401ef62cf77778274}{operator=}}(\mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable_a16214615f5196b73c0c5ccdeaef0d1b2}{NvbenchCallable}}\ \&\&other)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00053\ \ \ \ \ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a22fd67356c3182ab8edffab2d1f12698}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_acd1373af13d217a070b3c8748a672085}{state}}(\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a8ad0f282c3cb1ea564b76cc7f8ffad8c}{operator=}}(\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_adb6ece97997fdee4198d856fbd8a4c82}{instance}}()}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a20f92174af24c8a48643ad8448927e81}{state}}\ inst;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inst;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a46e91f8837bb7e4f46e9aaa19316b95d}{set\_state}}(nvbench::state\ *st)}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_adb6ece97997fdee4198d856fbd8a4c82}{instance}}().\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a144d2fbd594aa8b70b5327081a898552}{st\_}}\ =\ st;}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ nvbench::state\ *\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a458c0910d3c7c5118dc8b5e852ea7352}{get\_state}}()}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_adb6ece97997fdee4198d856fbd8a4c82}{instance}}().\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a144d2fbd594aa8b70b5327081a898552}{st\_}})}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::runtime\_error(\textcolor{stringliteral}{"{}Benchmark\ state\ is\ not\ set."{}});}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_adb6ece97997fdee4198d856fbd8a4c82}{instance}}().\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a144d2fbd594aa8b70b5327081a898552}{st\_}};}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a96b1273b882abc83d127fbd1df984fb4}{state}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ nvbench::state\ *\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a144d2fbd594aa8b70b5327081a898552}{st\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00084\ \ \ \ \ \};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a14750150ee43890c6109bab1b69ee0fe}{nvbench\_manager}}}
\DoxyCodeLine{00087\ \ \ \ \ \{}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a14750150ee43890c6109bab1b69ee0fe}{nvbench\_manager}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_aa94f048fadeb65f4fb6a0bd394210e25}{\string~nvbench\_manager}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_af5965542bdc31d1acc16d6dc904307ab}{initialize}}(\textcolor{keywordtype}{int}\ \&argc,\ \textcolor{keywordtype}{char}\ **argv)}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ [tmp\_argc,\ tmp\_argv]\ =\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_af783e8d9b52657a7c008d49b0309883b}{nvbench\_parser\_}}.parse(argc,\ argv);}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a33476583349ba964eec42d017f8df3e2}{nvbench\_argc}}\ =\ tmp\_argc;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab2055048228e018603c385c37097b2f6}{nvbench\_argv}}\ =\ tmp\_argv;}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab3ddb62eda1d12acfb891a4ae04b31fe}{print\_benchmark\_header}}();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ nvbench::benchmark\_base\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a9a59e3a1609e53ea9217422f34b0d0ca}{add\_nvbench}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *name,\ Func\ f,\ Args\ \&\&...args)}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ std::tuple<std::decay\_t<Args>...>\ cargs(std::forward<Args>(args)...);}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nvbench\_wrapper\ =\ [f,\ cargs\ =\ std::move(cargs)](nvbench::state\ \&st)\ \textcolor{keyword}{mutable}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1state_a46e91f8837bb7e4f46e9aaa19316b95d}{comppare::plugin::nvbenchplugin::state::set\_state}}(\&st);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::apply([\&](\textcolor{keyword}{auto}\ \&\&...unpacked)}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ f(std::forward<\textcolor{keyword}{decltype}(unpacked)>(unpacked)...);\ \},\ cargs);}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Callable\ =\ \mbox{\hyperlink{structcomppare_1_1plugin_1_1nvbenchplugin_1_1_nvbench_callable}{NvbenchCallable}}<\textcolor{keyword}{decltype}(nvbench\_wrapper)>;}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nvbench::benchmark\_manager::get()}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .add(std::make\_unique<nvbench::benchmark<Callable>>(Callable\{std::move(nvbench\_wrapper)\}))}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .set\_name(name);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a7da0678e729e31b40c991fae25d0aea2}{run}}()}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_INITIALIZE(\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a33476583349ba964eec42d017f8df3e2}{nvbench\_argc}},\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab2055048228e018603c385c37097b2f6}{nvbench\_argv}});}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_PARSE(\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a33476583349ba964eec42d017f8df3e2}{nvbench\_argc}},\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab2055048228e018603c385c37097b2f6}{nvbench\_argv}});}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_PRINT\_PREAMBLE(parser);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_RUN\_BENCHMARKS(parser);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_PRINT\_EPILOGUE(parser);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_PRINT\_RESULTS(parser);}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{comment}{/*\ Tear\ down\ parser\ before\ finalization\ */}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ NVBENCH\_MAIN\_FINALIZE();}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a33476583349ba964eec42d017f8df3e2}{nvbench\_argc}};}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}**\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab2055048228e018603c385c37097b2f6}{nvbench\_argv}};}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1_plugin_arg_parser}{comppare::plugin::PluginArgParser}}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_af783e8d9b52657a7c008d49b0309883b}{nvbench\_parser\_}}\{\textcolor{stringliteral}{"{}-\/-\/nvbench"{}}\};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab3ddb62eda1d12acfb891a4ae04b31fe}{print\_benchmark\_header}}()}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::left\ <<\ comppare::internal::ansi::BOLD}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*\(\backslash\)n=============\ "{}}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ comppare::internal::ansi::ITALIC(\textcolor{stringliteral}{"{}nvbench"{}})}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ =============\(\backslash\)n*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*"{}}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ comppare::internal::ansi::BOLD\_OFF\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}nvbench\ cmdline\ arguments:\(\backslash\)n"{}};}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_a33476583349ba964eec42d017f8df3e2}{nvbench\_argc}};\ ++i)}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ std::setw(2)\ <<\ std::right\ <<\ \textcolor{stringliteral}{"{}\ "{}}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ \ ["{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{}]\ "{}}\ <<\ std::quoted(\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager_ab2055048228e018603c385c37097b2f6}{nvbench\_argv}}[i])\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ std::left}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ comppare::internal::ansi::BOLD(\textcolor{stringliteral}{"{}*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*"{}})}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \};}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ InTup,\ \textcolor{keyword}{class}\ OutTup>}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1_plugin}{Plugin}}<InTup,\ OutTup>}
\DoxyCodeLine{00164\ \ \ \ \ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a16ec4e26927a1de99afc485d2a8711da}{Self}}\ =\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin<InTup,\ OutTup>}};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench__manager}{comppare::plugin::nvbenchplugin::nvbench\_manager}}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a0708b1ba0158c82398c60ed9fd72010e}{nb\_}};}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_acba3ccad44a321fb716531b1d2461e10}{nvbenchPlugin}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin}}\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a95673b53bd2ea0e666d6f716f8f03636}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5e6b7c0d857f014c88d0f3122b0cc01c}{nvbenchPlugin}}\ \&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<Self>\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a5c465c177aa36d6af98e1e68303c6724}{instance}}()}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<Self>\ inst\{\textcolor{keyword}{new}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a16ec4e26927a1de99afc485d2a8711da}{Self}}\};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inst;}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Func>}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ nvbench::benchmark\_base\ \&\mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a245d1e407e3a34c4268eb60b02ab2729}{register\_impl}}(\textcolor{keyword}{const}\ std::string\ \&name,}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Func\ \&\&user\_fn,}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ InTup\ \&inputs,}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ OutTup\ \&outs)}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::apply([\&](\textcolor{keyword}{auto}\&\&...\ in\_vals)\ -\/>\ nvbench::benchmark\_base\&\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::apply([\&](\textcolor{keyword}{auto}\&\&...\ out\_vals)\ -\/>\ nvbench::benchmark\_base\&\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a0708b1ba0158c82398c60ed9fd72010e}{nb\_}}.add\_nvbench(name.c\_str(),}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::forward<Func>(user\_fn),}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::forward<\textcolor{keyword}{decltype}(in\_vals)>(in\_vals)...,}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::forward<\textcolor{keyword}{decltype}(out\_vals)>(out\_vals)...);}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ outs);}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ inputs);}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_aab6a863d0b680e9b525ad6ba78022b0f}{initialize}}(\textcolor{keywordtype}{int}\ \&argc,\ \textcolor{keywordtype}{char}\ **argv)\textcolor{keyword}{\ override}}
\DoxyCodeLine{00198\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a0708b1ba0158c82398c60ed9fd72010e}{nb\_}}.initialize(argc,\ argv);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_af0e3f39f97d8db7adb2625c652565b85}{run}}()\textcolor{keyword}{\ override}}
\DoxyCodeLine{00202\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcomppare_1_1plugin_1_1nvbenchplugin_1_1nvbench_plugin_a0708b1ba0158c82398c60ed9fd72010e}{nb\_}}.run();}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00205\ \ \ \ \ \};}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#define\ PLUGIN\_HOTLOOP\_BENCH\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00209\ \textcolor{preprocessor}{\ \ \ \ auto\ state\_\ =\ comppare::plugin::nvbenchplugin::state::get\_state();\ \(\backslash\)}}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\ \ \ \ state\_-\/>exec([\&](nvbench::launch\ \&launch)\ \{\ hotloop\_body();\ \});}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \textcolor{preprocessor}{\#define\ GPU\_PLUGIN\_HOTLOOP\_BENCH\ PLUGIN\_HOTLOOP\_BENCH}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
